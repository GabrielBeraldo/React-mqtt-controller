(window["webpackJsonpreact-mqtt-controller"]=window["webpackJsonpreact-mqtt-controller"]||[]).push([[0],{146:function(e,t){},147:function(e,t){},154:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a.n(c),i=a(54),l=a.n(i),s=(a(66),a(55)),o=a(56),r=a(57),u=a(59),m=a(58),h=a(60),v=(a(67),["https://image.flaticon.com/icons/svg/1527/1527680.svg","https://image.flaticon.com/icons/svg/1527/1527681.svg"]),g=["https://image.flaticon.com/icons/svg/1113/1113742.svg"],d=["https://image.flaticon.com/icons/svg/1779/1779883.svg"],p=["attic/light1/status","attic/light2/status","attic/light3/status","attic/sensors"],f=["attic/light1","attic/light2","attic/light3"],b=a(68),E="mqtt://homeassist.local",x={port:1884,clientId:"nodecontroller_"+Math.random().toString(16).substr(2,8),keepalive:60,reconnectPeriod:500,protocolId:"MQTT",protocolVersion:4,clean:!0,encoding:"utf8"},N=b.connect(E,x);console.log("Requesting connection to "+E);var w=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).switchChanged=function(e){if(!a.state.hasOwnProperty(e))return!1;var t=a.state[e].value,c=a.state[e].topicIndex;N.publish(f[c],t?"off":"on");var n=a.state[e];n.value=!n.value,a.setState(Object(s.a)({},e,n))},a.handleConnection=function(){p.forEach(function(e){N.subscribe(e),console.log("subscribed to: "+e)})},a.handleMessage=function(e,t){var c={"attic/light1/status":function(e){var t="on"==e,c=a.state.light1;c.value=t,a.setState({light1:c})},"attic/light2/status":function(e){var t="on"==e,c=a.state.light2;c.value=t,a.setState({light2:c})},"attic/light3/status":function(e){var t="on"==e,c=a.state.light3;c.value=t,a.setState({light3:c})},"attic/sensors":function(e){var t=JSON.parse(e),c=a.state.hum,n=a.state.temp;c.value=parseFloat(t.Humidity),n.value=parseFloat(t.Temperature),a.setState({hum:c,temp:n})}}[e];c&&(c(t),console.log(a.state))},a.createSwitch=function(e){return n.a.createElement("div",{className:"device"},n.a.createElement("label",{className:"device-label"},n.a.createElement("img",{src:a.state[e].value?v[1]:v[0],className:"device-icon",id:"light1-icon"}),n.a.createElement("strong",{className:"device-text"},a.state[e].text)),n.a.createElement("label",{className:"switch"},n.a.createElement("input",{type:"checkbox",id:"switch1",checked:a.state[e].value,onClick:function(){a.switchChanged(e)}}),n.a.createElement("span",{className:"slider round"})))},a.createDevices=function(){return n.a.createElement("div",{className:"devices-container"},a.createSwitch("light1"),a.createSwitch("light2"),a.createSwitch("light3"),n.a.createElement("div",{className:"device"},n.a.createElement("label",{className:"device-label"},n.a.createElement("img",{src:g,className:"device-icon",id:"temp-icon"}),n.a.createElement("strong",{className:"device-text"},"Temperature ")),n.a.createElement("label",{className:"temp-label",id:"temp-value"},a.state.temp.value.toString()+"\xb0C")),n.a.createElement("div",{className:"device"},n.a.createElement("label",{className:"device-label"},n.a.createElement("img",{src:d,className:"device-icon",id:"hum-icon"}),n.a.createElement("strong",{className:"device-text"},"Humidity ")),n.a.createElement("label",{className:"hum-label",id:"hum-value"},a.state.hum.value.toString()+"%")))},a.state={light1:{value:!1,topicIndex:0,text:"Light 1"},light2:{value:!1,topicIndex:1,text:"Light 2"},light3:{value:!1,topicIndex:2,text:"Light 3"},temp:{value:"--,-",topicIndex:3,text:"Temperature"},hum:{value:"--,-",topicIndex:3,text:"humidity"},rgb:{value:{red:0,green:0,blue:0},topicIndex:4,text:"rgb"}},a}return Object(h.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;N.on("connect",function(){e.handleConnection()}),N.on("message",function(t,a){e.handleMessage(t,a)})}},{key:"render",value:function(){return n.a.createElement("div",{className:"main-container"},this.createDevices())}}]),t}(c.Component);var S=function(){return n.a.createElement(w,null)};l.a.render(n.a.createElement(S,null),document.getElementById("root"))},61:function(e,t,a){e.exports=a(154)},66:function(e,t,a){},67:function(e,t,a){},71:function(e,t){},73:function(e,t){}},[[61,1,2]]]);
//# sourceMappingURL=main.76a95c2a.chunk.js.map